From 2c6e6394f2b69d1ff4ffc63e4346845ad1c7631c Mon Sep 17 00:00:00 2001
From: Charles Stevens <charles.stevens@logicpd.com>
Date: Thu, 14 May 2020 12:09:26 -0500
Subject: [PATCH 27/30] dts: Add spidev node and SPI (msiof) pin mux

---
 .../dts/renesas/beacon-renesom-baseboard.dtsi | 22 +++++++++++++++++++
 1 file changed, 22 insertions(+)

diff --git a/arch/arm64/boot/dts/renesas/beacon-renesom-baseboard.dtsi b/arch/arm64/boot/dts/renesas/beacon-renesom-baseboard.dtsi
index 08f02ee4831d..da5c77e2ec81 100644
--- a/arch/arm64/boot/dts/renesas/beacon-renesom-baseboard.dtsi
+++ b/arch/arm64/boot/dts/renesas/beacon-renesom-baseboard.dtsi
@@ -609,6 +609,11 @@
 		bias-pull-down;
 	};
 
+	msiof1_pins: msiof1 {
+		groups = "msiof1_clk_g", "msiof1_rxd_g", "msiof1_txd_g";
+		function = "msiof1";
+	};
+
 	pwm0_pins: pwm0 {
 		groups = "pwm0";
 		function = "pwm0";
@@ -725,6 +730,19 @@
 	};
 };
 
+&msiof1 {
+	pinctrl-0 = <&msiof1_pins>;
+	pinctrl-names = "default";
+	status = "okay";
+	cs-gpios = <&gpio3 10 GPIO_ACTIVE_LOW>;
+
+	spidev1@0x00 {
+	       compatible = "spidev";
+	       spi-max-frequency = <5000000>;
+	       reg = <0>;
+	};
+};
+
 &rwdt {
 	status = "okay";
 	timeout-sec = <60>;
@@ -839,3 +857,7 @@
 	pinctrl-names = "default";
 	status = "okay";
 };
+
+&msiof_ref_clk {
+	clock-frequency = <50000000>;
+};
-- 
2.17.1

